<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homeflix</title>
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/modal.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="navbar" id="navbar">
        <div class="navbar-left">
            <a href="/" class="netflix-logo">
                HOMEFLIX
            </a>
            <nav class="main-nav">
                <a href="/" class="nav-link">Home</a>
                <a href="javascript:void(0)" class="nav-link" onclick="filterByType('tv')">TV Shows</a>
                <a href="javascript:void(0)" class="nav-link" onclick="filterByType('movie')">Movies</a>
                <a href="javascript:void(0)" class="nav-link" onclick="showNewPopular()">New & Popular</a>
                <a href="javascript:void(0)" class="nav-link" onclick="showMyList()">My List</a>
            </nav>
        </div>
        <div class="navbar-right">
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Titles, people, genres" class="search-input" autocomplete="off" spellcheck="false" >
                <button class="search-toggle" onclick="toggleSearch()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M14 11C14 14.3137 11.3137 17 8 17C4.68629 17 2 14.3137 2 11C2 7.68629 4.68629 5 8 5C11.3137 5 14 7.68629 14 11ZM14.3623 15.8506C12.7815 17.3438 10.5044 18 8 18C4.13401 18 1 14.866 1 11C1 7.13401 4.13401 4 8 4C11.866 4 15 7.13401 15 11C15 12.0604 14.7056 13.0423 14.1945 13.8701L22.2071 21.8828L21.5 22.5899L14.3623 15.8506Z" fill="currentColor"/>
                    </svg>
                </button>
            </div>
            <div class="profile-menu">
                <div class="profile-avatar">
                    <div class="avatar-icon">U</div>
                </div>
            </div>
        </div>
    </header>

    <main class="main-content">
        <section class="hero-banner" {% if backdrop_urls and backdrop_urls|length > 0 %}style="background-image: url('{{ backdrop_urls[0] }}'); background-size: cover; background-position: center;"{% else %}style="background: linear-gradient(77deg, rgba(229,9,20,.8), rgba(0,0,0,.6)), linear-gradient(135deg, #141414 0%, #1a1a1a 50%, #141414 100%);"{% endif %}>
            <!-- Netflix-style mute/unmute button -->
            <button class="hero-sound-toggle" id="heroSoundToggle" style="display: none;">
                <svg class="sound-on" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" fill="currentColor"/>
                </svg>
                <svg class="sound-off" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">
                    <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z" fill="currentColor"/>
                </svg>
            </button>

            <!-- Netflix-style maturity rating badge
            {% if series and series|length > 0 %}
            <div class="hero-maturity-badge">
                <span>{{ series[0].rating|default('TV-MA') }}</span>
            </div>
            {% endif %} -->

            <div class="hero-content">
                <div class="hero-info">
                    {% if series and series|length > 0 %}
                    <!-- Hidden data for hero card -->
                    <div class="hidden" data-hero="true" data-type="series" data-id="{{ series[0].imdb_id }}" data-tmdb-id="{{ series[0].tmdb_id }}"></div>
                    
                    <!-- Netflix-style logo/title image (if available) -->
                    <div class="hero-logo">
                        <h1 class="hero-title">{{ series[0].title }}</h1>
                    </div>
                    {% else %}
                    <div class="hero-logo">
                        <h1 class="hero-title">Welcome to Homeflix</h1>
                    </div>
                    <p class="hero-overview">Unlimited movies, TV shows, and more.</p>
                    {% endif %}
                    
                    <div class="hero-buttons">
                        <button class="btn btn-primary" id="heroPlayBtn">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8 5v14l11-7z" fill="currentColor"/>
                            </svg>
                            Play
                        </button>
                        <button class="btn btn-secondary" id="moreInfoBtn">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" fill="currentColor"/>
                            </svg>
                            <span id="moreInfoText">More Info</span>
                        </button>
                        
                        <!-- Netflix-style additional buttons -->
                        <button class="btn btn-icon" id="heroAddBtn" title="Add to My List">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" fill="currentColor" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </button>
                        <button class="btn btn-icon" id="heroLikeBtn" title="Rate">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z" fill="currentColor" stroke="currentColor" stroke-width="1"/>
                            </svg>
                        </button>
                    </div>
                    
                    {% if series and series|length > 0 %}
                    <!-- Expanded info section (hidden by default) -->
                    <div class="hero-expanded-info" id="heroExpandedInfo">
                        <div class="hero-synopsis-full" id="heroSynopsis">
                            <p>{{ series[0].overview if series[0].overview else "Full description of the show goes here with all the details about plot, characters, and what makes it worth watching." }}</p>
                            <button class="hero-show-more-btn" id="heroShowMoreBtn" onclick="toggleHeroExpanded()">
                                <span id="heroShowMoreText">Show More</span>
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7 10l5 5 5-5z" fill="currentColor"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    {% endif %}
                </div>
                
                <!-- Netflix-style fade gradients -->
                <div class="hero-fade-bottom"></div>
                <div class="hero-vignette"></div>
            </div>
        </section>

        <!-- Continue Watching Row -->
        {% if continue_watching and continue_watching|length > 0 %}
        <section class="content-row">
            <div class="row-header">
                <h2 class="row-title">Continue Watching</h2>
            </div>
            <div class="row-slider">
                <div class="slider-container" id="continue-watching-slider">
                    {% for item in continue_watching %}
                    <div class="title-card" data-title="{{ item.title }}" data-type="{{ item.type }}" data-id="{{ item.id }}" data-tmdb-id="{{ item.tmdb_id }}">
                        <div class="title-card-image">
                            <span class="continue-watching-badge">Continue Watching</span>
                            {% if item.poster_url %}
                            <img src="{{ item.poster_url }}" alt="{{ item.title }}" loading="lazy">
                            {% else %}
                            <div class="placeholder-image">
                                <span>{{ item.title[:1] }}</span>
                            </div>
                            {% endif %}
                            <div class="progress-bar-container">
                                <div class="progress-bar" style="width: {{ (item.progress / item.duration * 100)|round|int }}%"></div>
                            </div>
                        </div>
                        <div class="title-card-metadata">
                            <div class="metadata-top">
                                <div class="title-card-play-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M8 5v14l11-7z" fill="currentColor"/>
                                    </svg>
                                </div>
                                <div class="title-card-add-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" fill="currentColor"/>
                                    </svg>
                                </div>
                                <div class="title-card-like-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z" fill="currentColor"/>
                                    </svg>
                                </div>
                                <div class="title-card-expand-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z" fill="currentColor"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="metadata-bottom">
                                <div class="title-card-title">{{ item.title }}</div>
                                <div class="title-card-genres">
                                    <span class="genre-tag">{{ (item.progress / item.duration * 100)|round|int }}% watched</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </section>
        {% endif %}

        <!-- My List Row -->
        {% if my_list and my_list|length > 0 %}
        <section class="content-row">
            <div class="row-header">
                <h2 class="row-title">My List</h2>
            </div>
            <div class="row-slider">
                <div class="slider-container" id="my-list-slider">
                    {% for item in my_list %}
                    <div class="title-card" data-title="{{ item.title }}" data-type="{{ item.type }}" data-id="{{ item.id }}" data-tmdb-id="{{ item.tmdb_id }}">
                        <div class="title-card-image">
                            {% if item.poster_url %}
                            <img src="{{ item.poster_url }}" alt="{{ item.title }}" loading="lazy">
                            {% else %}
                            <div class="placeholder-image">
                                <span>{{ item.title[:1] }}</span>
                            </div>
                            {% endif %}
                        </div>
                        <div class="title-card-metadata">
                            <div class="metadata-top">
                                <div class="title-card-play-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M8 5v14l11-7z" fill="currentColor"/>
                                    </svg>
                                </div>
                                <div class="title-card-add-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" fill="currentColor"/>
                                    </svg>
                                </div>
                                <div class="title-card-like-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z" fill="currentColor"/>
                                    </svg>
                                </div>
                                <div class="title-card-expand-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z" fill="currentColor"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="metadata-bottom">
                                <div class="title-card-title">{{ item.title }}</div>
                                <div class="title-card-genres">
                                    <span class="genre-tag">In My List</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </section>
        {% endif %}

        <!-- Trending Movies Row -->
        <section class="content-row">
            <div class="row-header">
                <h2 class="row-title">Trending Now</h2>
            </div>
            <div class="row-slider">
                <div class="slider-container" id="trending-movies-slider">
                    {% for movie in trending_movies %}
                    <div class="title-card" data-title="{{ movie.title }}" data-type="movie" data-id="{{ movie.imdb_id }}" data-tmdb-id="{{ movie.tmdb_id }}">
                        <div class="title-card-image">
                            {% if movie.poster_url %}
                            <img src="{{ movie.poster_url }}" alt="{{ movie.title }}" loading="lazy">
                            {% else %}
                            <div class="placeholder-image">
                                <span>{{ movie.title[:1] }}</span>
                            </div>
                            {% endif %}
                        </div>
                        <div class="title-card-metadata">
                            <div class="metadata-top">
                                <div class="title-card-play-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M8 5v14l11-7z" fill="currentColor"/>
                                    </svg>
                                </div>
                                <div class="title-card-add-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" fill="currentColor"/>
                                    </svg>
                                </div>
                                <div class="title-card-like-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z" fill="currentColor"/>
                                    </svg>
                                </div>
                                <div class="title-card-expand-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z" fill="currentColor"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="metadata-bottom">
                                <div class="title-card-title">{{ movie.title }}</div>
                                <div class="title-card-genres">
                                    <span class="genre-tag">{{ movie.quality }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </section>

        <!-- Movies Row -->
        <section class="content-row">
            <div class="row-header">
                <h2 class="row-title">{% if search_query %}Search Results for "{{ search_query }}"{% else %}Latest Movies{% endif %}</h2>
            </div>
            <div class="row-slider">
                <div class="slider-container" id="movies-slider">
                    {% for movie in movies %}
                    <div class="title-card" data-title="{{ movie.title }}" data-type="movie" data-id="{{ movie.imdb_id }}" data-tmdb-id="{{ movie.tmdb_id }}">
                        <div class="title-card-image">
                            {% if movie.poster_url %}
                            <img src="{{ movie.poster_url }}" alt="{{ movie.title }}" loading="lazy">
                            {% else %}
                            <div class="placeholder-image">
                                <span>{{ movie.title[:1] }}</span>
                            </div>
                            {% endif %}
                        </div>
                        <div class="title-card-metadata">
                            <div class="metadata-top">
                                <div class="title-card-play-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M8 5v14l11-7z" fill="currentColor"/>
                                    </svg>
                                </div>
                                <div class="title-card-add-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" fill="currentColor"/>
                                    </svg>
                                </div>
                                <div class="title-card-like-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z" fill="currentColor"/>
                                    </svg>
                                </div>
                                <div class="title-card-expand-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z" fill="currentColor"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="metadata-bottom">
                                <div class="title-card-title">{{ movie.title }}</div>
                                <div class="title-card-genres">
                                    <span class="genre-tag">{{ movie.quality }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                <button class="load-more-button" onclick="loadMoreMovies()">
                    {% if search_query %}Load More{% else %}Load More Movies{% endif %}
                </button>
            </div>
        </section>

        <!-- Trending TV Shows Row -->
        <section class="content-row">
            <div class="row-header">
                <h2 class="row-title">Trending TV Shows</h2>
            </div>
            <div class="row-slider">
                <div class="slider-container" id="trending-series-slider">
                    {% for show in trending_series %}
                    <div class="title-card" data-title="{{ show.title }}" data-type="series" data-id="{{ show.imdb_id }}" data-tmdb-id="{{ show.tmdb_id }}">
                        <div class="title-card-image">
                            {% if show.poster_url %}
                            <img src="{{ show.poster_url }}" alt="{{ show.title }}" loading="lazy">
                            {% else %}
                            <div class="placeholder-image">
                                <span>{{ show.title[:1] }}</span>
                            </div>
                            {% endif %}
                        </div>
                        <div class="title-card-metadata">
                            <div class="metadata-top">
                                <div class="title-card-play-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M8 5v14l11-7z" fill="currentColor"/>
                                    </svg>
                                </div>
                                <div class="title-card-add-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" fill="currentColor"/>
                                    </svg>
                                </div>
                                <div class="title-card-like-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z" fill="currentColor"/>
                                    </svg>
                                </div>
                                <div class="title-card-expand-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z" fill="currentColor"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="metadata-bottom">
                                <div class="title-card-title">{{ show.title }}</div>
                                <div class="title-card-genres">
                                    <span class="genre-tag">HD</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </section>

        <!-- TV Shows Row -->
        <section class="content-row">
            <div class="row-header">
                <h2 class="row-title">{% if search_query %}More Search Results{% else %}Popular TV Shows{% endif %}</h2>
            </div>
            <div class="row-slider">
                <div class="slider-container" id="series-slider">
                    {% for show in series %}
                    <div class="title-card" data-title="{{ show.title }}" data-type="series" data-id="{{ show.imdb_id }}" data-tmdb-id="{{ show.tmdb_id }}">
                        <div class="title-card-image">
                            {% if show.poster_url %}
                            <img src="{{ show.poster_url }}" alt="{{ show.title }}" loading="lazy">
                            {% else %}
                            <div class="placeholder-image">
                                <span>{{ show.title[:1] }}</span>
                            </div>
                            {% endif %}
                        </div>
                        <div class="title-card-metadata">
                            <div class="metadata-top">
                                <div class="title-card-play-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M8 5v14l11-7z" fill="currentColor"/>
                                    </svg>
                                </div>
                                <div class="title-card-add-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" fill="currentColor"/>
                                    </svg>
                                </div>
                                <div class="title-card-like-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z" fill="currentColor"/>
                                    </svg>
                                </div>
                                <div class="title-card-expand-button">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z" fill="currentColor"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="metadata-bottom">
                                <div class="title-card-title">{{ show.title }}</div>
                                <div class="title-card-genres">
                                    <span class="genre-tag">Series</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                <button class="load-more-button" onclick="loadMoreSeries()">
                    {% if search_query %}Load More{% else %}Load More Shows{% endif %}
                </button>
            </div>
        </section>
    </main>

    <script>
        let moviePage = {{ movie_page }};
        let seriesPage = {{ series_page }};
        let backdropUrls = {{ backdrop_urls | tojson }};
        let heroSeries = {{ series | tojson }};
        let currentBackdropIndex = 0;
        let searchQuery = "{{ search_query }}";

        // Change background AND hero content every 8 seconds
        if (backdropUrls && backdropUrls.length > 1 && heroSeries && heroSeries.length > 1) {
            setInterval(() => {
                currentBackdropIndex = (currentBackdropIndex + 1) % Math.min(backdropUrls.length, heroSeries.length);
                updateHeroContent(currentBackdropIndex);
            }, 8000);
        }

        // Update hero banner content to match the current featured series
        function updateHeroContent(index) {
            const heroBanner = document.querySelector('.hero-banner');
            const heroInfo = document.querySelector('.hero-info');
            const series = heroSeries[index];
            
            if (!heroBanner || !series || !heroInfo) return;
            
            // Add fade-out effect
            heroInfo.style.opacity = '0';
            heroInfo.style.transition = 'opacity 0.5s ease-in-out';
            
            // Wait for fade-out to complete before updating content
            setTimeout(() => {
                // Update background
                if (backdropUrls[index]) {
                    heroBanner.style.backgroundImage = `url('${backdropUrls[index]}')`;
                    heroBanner.style.backgroundSize = 'cover';
                    heroBanner.style.backgroundPosition = 'center';
                }
                
                // Update maturity rating badge
                const maturityBadge = heroBanner.querySelector('.hero-maturity-badge span');
                if (maturityBadge) {
                    maturityBadge.textContent = series.rating || 'TV-MA';
                }
                
                // Update hidden data attributes for buttons
                const heroCard = heroBanner.querySelector('[data-hero="true"]');
                if (heroCard) {
                    heroCard.dataset.type = 'series';
                    heroCard.dataset.id = series.imdb_id;
                    heroCard.dataset.tmdbId = series.tmdb_id;
                }
                
                // Update title
                const heroTitle = heroBanner.querySelector('.hero-title');
                if (heroTitle) {
                    heroTitle.textContent = series.title;
                }
                
                // Update badges (NEW, TOP 10, etc)
                const badgeTop10 = heroBanner.querySelector('.badge-top10');
                if (badgeTop10) {
                    const position = (index + 1);
                    badgeTop10.textContent = `#${position} in TV Shows Today`;
                }
                
                // Update match score and metadata
                const matchScore = heroBanner.querySelector('.hero-match');
                if (matchScore) {
                    // Generate random match score between 85-99 for variety
                    const score = 85 + Math.floor(Math.random() * 15);
                    matchScore.textContent = `${score}% Match`;
                }
                
                const heroYear = heroBanner.querySelector('.hero-year');
                if (heroYear) {
                    heroYear.textContent = series.year || '2024';
                }
                
                const heroRatingBadge = heroBanner.querySelector('.hero-rating-badge');
                if (heroRatingBadge) {
                    heroRatingBadge.textContent = series.rating || 'TV-MA';
                }
                
                const heroSeasons = heroBanner.querySelector('.hero-seasons');
                if (heroSeasons) {
                    const seasons = series.number_of_seasons || '3';
                    heroSeasons.textContent = `${seasons} Season${seasons !== 1 ? 's' : ''}`;
                }
                
                // Update overview
                const heroOverview = heroBanner.querySelector('.hero-overview');
                if (heroOverview) {
                    const overview = series.overview || 'Unlimited movies, TV shows, and more.';
                    heroOverview.textContent = overview.length > 180 ? overview.substring(0, 180) + '...' : overview;
                }
                
                // Update expanded info if it exists
                const expandedInfo = heroBanner.querySelector('.hero-expanded-info');
                if (expandedInfo) {
                    const fullSynopsis = expandedInfo.querySelector('.hero-synopsis-full p');
                    if (fullSynopsis) {
                        fullSynopsis.textContent = series.overview || 'Full description of the show goes here with all the details about plot, characters, and what makes it worth watching.';
                    }
                    
                    const genresValue = expandedInfo.querySelector('.detail-item:nth-child(2) .detail-value');
                    if (genresValue && series.genres) {
                        genresValue.textContent = series.genres.join(', ');
                    }
                }
                
                // Re-initialize hero banner buttons with new data
                reinitializeHeroButtons();
                
                // Fade content back in
                heroInfo.style.opacity = '1';
            }, 500); // Match this with the fade-out duration
        }
        
        // Reinitialize hero buttons after content update
        function reinitializeHeroButtons() {
            const heroPlayBtn = document.getElementById('heroPlayBtn');
            const heroAddBtn = document.getElementById('heroAddBtn');
            const heroLikeBtn = document.getElementById('heroLikeBtn');
            const heroCard = document.querySelector('[data-hero="true"]');
            
            if (!heroCard) return;
            
            const type = heroCard.dataset.type;
            const id = heroCard.dataset.id;
            const tmdbId = heroCard.dataset.tmdbId;
            const title = document.querySelector('.hero-title').textContent;
            
            // Remove old event listeners by cloning and replacing
            if (heroPlayBtn) {
                const newPlayBtn = heroPlayBtn.cloneNode(true);
                heroPlayBtn.parentNode.replaceChild(newPlayBtn, heroPlayBtn);
                newPlayBtn.addEventListener('click', function() {
                    if (typeof homeflixApp !== 'undefined') {
                        homeflixApp.playTitle(type, id);
                    } else {
                        window.location.href = `/watch/${type}/${id}`;
                    }
                });
            }
            
            if (heroAddBtn) {
                const newAddBtn = heroAddBtn.cloneNode(true);
                heroAddBtn.parentNode.replaceChild(newAddBtn, heroAddBtn);
                newAddBtn.addEventListener('click', function() {
                    if (typeof homeflixApp !== 'undefined') {
                        homeflixApp.toggleMyList(type, id, tmdbId, title, newAddBtn);
                    }
                });
            }
            
            if (heroLikeBtn) {
                const newLikeBtn = heroLikeBtn.cloneNode(true);
                heroLikeBtn.parentNode.replaceChild(newLikeBtn, heroLikeBtn);
                newLikeBtn.addEventListener('click', function() {
                    if (typeof homeflixApp !== 'undefined') {
                        homeflixApp.toggleLike(type, id, title, newLikeBtn);
                    }
                });
            }
        }

        // Netflix-style navbar scroll effect
        window.addEventListener('scroll', function() {
            const navbar = document.getElementById('navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        // Netflix-style Hero Banner functionality
        function initializeHeroBanner() {
            const heroBanner = document.querySelector('.hero-banner');
            const moreInfoBtn = document.getElementById('moreInfoBtn');
            const heroPlayBtn = document.getElementById('heroPlayBtn');
            const heroAddBtn = document.getElementById('heroAddBtn');
            const heroLikeBtn = document.getElementById('heroLikeBtn');
            const heroCard = document.querySelector('[data-hero="true"]');
            
            // More Info button - Toggle expanded view
            if (moreInfoBtn) {
                moreInfoBtn.addEventListener('click', function() {
                    const isExpanded = heroBanner.classList.contains('expanded');
                    
                    if (isExpanded) {
                        heroBanner.classList.remove('expanded');
                        moreInfoBtn.querySelector('#moreInfoText').textContent = 'More Info';
                        // Scroll to top smoothly
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    } else {
                        heroBanner.classList.add('expanded');
                        moreInfoBtn.querySelector('#moreInfoText').textContent = 'Less Info';
                    }
                });
            }
            
            // Play button
            if (heroPlayBtn && heroCard) {
                heroPlayBtn.addEventListener('click', function() {
                    const type = heroCard.dataset.type;
                    const id = heroCard.dataset.id;
                    if (typeof homeflixApp !== 'undefined') {
                        homeflixApp.playTitle(type, id);
                    } else {
                        window.location.href = `/watch/${type}/${id}`;
                    }
                });
            }
            
            // Add to My List button
            if (heroAddBtn && heroCard) {
                heroAddBtn.addEventListener('click', function() {
                    const type = heroCard.dataset.type;
                    const id = heroCard.dataset.id;
                    const tmdbId = heroCard.dataset.tmdbId;
                    const title = document.querySelector('.hero-title').textContent;
                    
                    if (typeof homeflixApp !== 'undefined') {
                        homeflixApp.toggleMyList(type, id, tmdbId, title, heroAddBtn);
                    }
                });
            }
            
            // Like button
            if (heroLikeBtn && heroCard) {
                heroLikeBtn.addEventListener('click', function() {
                    const type = heroCard.dataset.type;
                    const id = heroCard.dataset.id;
                    const title = document.querySelector('.hero-title').textContent;
                    
                    if (typeof homeflixApp !== 'undefined') {
                        homeflixApp.toggleLike(type, id, title, heroLikeBtn);
                    }
                });
            }
            
            // Auto-collapse on scroll down
            let lastScrollTop = 0;
            window.addEventListener('scroll', function() {
                let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                
                if (scrollTop > 300 && scrollTop > lastScrollTop && heroBanner.classList.contains('expanded')) {
                    heroBanner.classList.remove('expanded');
                    if (moreInfoBtn) {
                        moreInfoBtn.querySelector('#moreInfoText').textContent = 'More Info';
                    }
                }
                
                lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
            });
        }
        
        // Initialize hero banner on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializeHeroBanner();
            setupTitleCardInteractions();
            initializeHeroWatchButton();
            
            // Initialize search input enter key
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('keyup', function(event) {
                    if (event.key === 'Enter') {
                        filterContent();
                    }
                });
            }
            
            // Wait a bit for hero banner to be fully set up, then initialize button states
            setTimeout(() => {
                initializeMyListButtons();
            }, 100);
        });
        
        // Toggle hero expanded synopsis
        function toggleHeroExpanded() {
            const synopsis = document.getElementById('heroSynopsis');
            const showMoreBtn = document.getElementById('heroShowMoreBtn');
            const showMoreText = document.getElementById('heroShowMoreText');
            
            if (synopsis.classList.contains('expanded')) {
                synopsis.classList.remove('expanded');
                showMoreText.textContent = 'Show More';
            } else {
                synopsis.classList.add('expanded');
                showMoreText.textContent = 'Show Less';
            }
        }
        
        // Initialize hero watch button
        function initializeHeroWatchButton() {
            const heroWatchBtn = document.getElementById('heroWatchBtn');
            const heroCard = document.querySelector('[data-hero="true"]');
            
            if (heroWatchBtn && heroCard) {
                heroWatchBtn.addEventListener('click', function() {
                    const type = heroCard.dataset.type;
                    const id = heroCard.dataset.id;
                    if (type === 'series') {
                        window.location.href = `/series/${id}`;
                    } else {
                        window.location.href = `/watch/${type}/${id}`;
                    }
                });
            }
        }
        
        // Initialize My List button states
        async function initializeMyListButtons() {
            try {
                const response = await fetch('/api/my-list');
                const data = await response.json();
                
                if (data.success && data.items) {
                    const myListIds = new Set(data.items.map(item => item.id || item.imdb_id));
                    
                    // Update all add buttons in title cards
                    document.querySelectorAll('.title-card').forEach(card => {
                        const id = card.dataset.id;
                        const addButton = card.querySelector('.title-card-add-button');
                        
                        if (addButton && myListIds.has(id)) {
                            addButton.innerHTML = '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" fill="currentColor"/></svg>';
                            addButton.dataset.added = 'true';
                            addButton.title = 'Remove from My List';
                        }
                    });
                    
                    // Also update hero button if it exists
                    const heroAddBtn = document.getElementById('heroAddBtn');
                    if (heroAddBtn) {
                        const heroData = document.querySelector('[data-hero="true"]');
                        if (heroData) {
                            const heroId = heroData.dataset.id;
                            if (myListIds.has(heroId)) {
                                heroAddBtn.innerHTML = '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" fill="currentColor"/></svg>';
                                heroAddBtn.dataset.added = 'true';
                                heroAddBtn.title = 'Remove from My List';
                            }
                        }
                    }
                }
            } catch (error) {
                console.error('Failed to initialize My List buttons:', error);
            }
        }

        // Search functionality
        let searchVisible = false;
        function toggleSearch() {
            const searchInput = document.getElementById('searchInput');
            const searchContainer = document.querySelector('.search-container');
            searchVisible = true;
            searchContainer.classList.add('active');
            searchInput.focus();
        }

        // Hide search when clicking outside
        function hideSearchIfOutside(event) {
            const searchContainer = document.querySelector('.search-container');
            const searchToggle = document.querySelector('.search-toggle');
            const searchInput = document.getElementById('searchInput');
            if (
                searchContainer.classList.contains('active') &&
                !searchContainer.contains(event.target) &&
                !searchToggle.contains(event.target)
            ) {
                searchContainer.classList.remove('active');
                searchInput.blur();
                searchInput.value = '';
                searchVisible = false;
            }
        }
        document.addEventListener('click', hideSearchIfOutside);

        // Close search when clicking outside
        document.addEventListener('click', function(event) {
            const searchContainer = document.querySelector('.search-container');
            const searchInput = document.getElementById('searchInput');
            
            if (searchVisible && !searchContainer.contains(event.target)) {
                searchVisible = false;
                searchContainer.classList.remove('active');
                searchInput.blur();
                if (searchInput.value.trim() === '') {
                    searchInput.value = '';
                }
            }
        });

        // // Add click handler to input field
        // document.addEventListener('DOMContentLoaded', function() {
        //     const searchInput = document.getElementById('searchInput');
        //     if (searchInput) {
        //         searchInput.addEventListener('click', function(event) {
        //             event.stopPropagation();
        //             if (!searchVisible) {
        //                 toggleSearch();
        //             }
        //         });
                
        //         searchInput.addEventListener('focus', function() {
        //             if (!searchVisible) {
        //                 toggleSearch();
        //             }
        //         });
                
        //         searchInput.addEventListener('blur', function() {
        //             if (searchVisible && this.value.trim() === '') {
        //                 setTimeout(() => toggleSearch(), 100);
        //             }
        //         });
        //     }
        // });

        function filterContent() {
            const query = document.getElementById('searchInput').value.trim();
            if (query === '') {
                window.location.href = '/';
                return;
            }
            
            // Show loading state
            const searchButton = document.querySelector('.search-toggle');
            const originalHTML = searchButton.innerHTML;
            searchButton.innerHTML = '<div style="width: 16px; height: 16px; border: 2px solid #fff; border-top: 2px solid transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div>';
            
            // Navigate to search results
            setTimeout(() => {
                window.location.href = `/search?q=${encodeURIComponent(query)}`;
            }, 500);
        }

        // Title card interactions - function will be called from DOMContentLoaded above

        function setupTitleCardInteractions() {
            const titleCards = document.querySelectorAll('.title-card');
            
            titleCards.forEach(card => {
                // Play button click
                const playButton = card.querySelector('.title-card-play-button');
                if (playButton) {
                    playButton.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const type = card.dataset.type;
                        const id = card.dataset.id;
                        // For series, go to details page, for movies play directly
                        if (type === 'series') {
                            window.location.href = `/series/${id}`;
                        } else {
                            window.location.href = `/watch/${type}/${id}`;
                        }
                    });
                }

                // Add to List button
                const addButton = card.querySelector('.title-card-add-button');
                if (addButton) {
                    addButton.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const title = card.dataset.title;
                        addToMyList(title, addButton);
                    });
                }

                // Like button
                const likeButton = card.querySelector('.title-card-like-button');
                if (likeButton) {
                    likeButton.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const title = card.dataset.title;
                        toggleLike(title, likeButton);
                    });
                }

                // More info button
                const expandButton = card.querySelector('.title-card-expand-button');
                if (expandButton) {
                    expandButton.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const title = card.dataset.title;
                        const type = card.dataset.type;
                        showTitleInfo(title, type);
                    });
                }

                // Card click
                card.addEventListener('click', function() {
                    const type = card.dataset.type;
                    const id = card.dataset.id;
                    // For series, go to details page first
                    if (type === 'series') {
                        window.location.href = `/series/${id}`;
                    } else {
                        window.location.href = `/watch/${type}/${id}`;
                    }
                });

                // Hover effects
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.05)';
                    this.style.zIndex = '10';
                });

                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                    this.style.zIndex = '1';
                });
            });
        }

        // Button functionality functions
        function addToMyList(title, button) {
            // Toggle between add and remove
            const isAdded = button.dataset.added === 'true';
            
            if (isAdded) {
                button.innerHTML = `
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" fill="currentColor"/>
                    </svg>
                `;
                button.dataset.added = 'false';
                button.style.backgroundColor = 'rgba(42,42,42,0.6)';
                alert(`"${title}" removed from My List`);
            } else {
                button.innerHTML = `
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" fill="currentColor"/>
                    </svg>
                `;
                button.dataset.added = 'true';
                button.style.backgroundColor = '#46d369';
                alert(`"${title}" added to My List`);
            }
        }

        function toggleLike(title, button) {
            // Toggle between like and dislike
            const isLiked = button.dataset.liked === 'true';
            
            if (isLiked) {
                button.innerHTML = `
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z" fill="currentColor"/>
                    </svg>
                `;
                button.dataset.liked = 'false';
                button.style.backgroundColor = 'rgba(42,42,42,0.6)';
                alert(`You unliked "${title}"`);
            } else {
                button.innerHTML = `
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M1 9h4v12H1V9zm22 11c0 1.1-.9 2-2 2h-6.31l.95 4.57.03.32c0 .41-.17.79-.44 1.06L14.17 23 7.59 16.41C7.22 16.05 7 15.55 7 15V5c0-1.1.9-2 2-2h9c.83 0 1.54.5 1.84 1.22l3.02 7.05c.09.23.14.47.14.73v2z" fill="currentColor"/>
                    </svg>
                `;
                button.dataset.liked = 'true';
                button.style.backgroundColor = '#e50914';
                alert(`You liked "${title}"`);
            }
        }

        function showTitleInfo(title, type) {
            alert(`More Info about "${title}":\n\nType: ${type === 'movie' ? 'Movie' : 'TV Series'}\n\nDetailed information will include:\n• Synopsis\n• Cast & Crew\n• Duration/Episodes\n• Genre\n• Release Date\n• Similar Titles\n\nFeature coming soon!`);
        }

        // Load more movies
        function loadMoreMovies() {
            const button = document.querySelector('#movies-slider').parentElement.querySelector('.load-more-button');
            button.disabled = true;
            button.textContent = 'Loading...';
            moviePage++;
            const url = searchQuery ? `/search_more_movies/${encodeURIComponent(searchQuery)}/${moviePage}` : `/load_more_movies/${moviePage}`;
            
            fetch(url)
                .then(response => response.json())
                .then((data) => {
                    if (data.movies && data.movies.length > 0) {
                        const slider = document.getElementById('movies-slider');
                        data.movies.forEach(movie => {
                            const card = createTitleCard(movie, 'movie');
                            slider.appendChild(card);
                        });
                    } else {
                        button.style.display = 'none';
                    }
                    button.disabled = false;
                    button.textContent = searchQuery ? 'Load More' : 'Load More Movies';
                })
                .catch(error => {
                    console.error('Error loading more movies:', error);
                    button.disabled = false;
                    button.textContent = searchQuery ? 'Load More' : 'Load More Movies';
                });
        }

        // Load more series
        function loadMoreSeries() {
            const button = document.querySelector('#series-slider').parentElement.querySelector('.load-more-button');
            button.disabled = true;
            button.textContent = 'Loading...';
            seriesPage++;
            const url = searchQuery ? `/search_more_series/${encodeURIComponent(searchQuery)}/${seriesPage}` : `/load_more_series/${seriesPage}`;
            
            fetch(url)
                .then(response => response.json())
                .then((data) => {
                    if (data.series && data.series.length > 0) {
                        const slider = document.getElementById('series-slider');
                        data.series.forEach(show => {
                            const card = createTitleCard(show, 'series');
                            slider.appendChild(card);
                        });
                    } else {
                        button.style.display = 'none';
                    }
                    button.disabled = false;
                    button.textContent = searchQuery ? 'Load More' : 'Load More Shows';
                })
                .catch(error => {
                    console.error('Error loading more series:', error);
                    button.disabled = false;
                    button.textContent = searchQuery ? 'Load More' : 'Load More Shows';
                });
        }

        // Create Netflix-style title card
        function createTitleCard(item, type) {
            const card = document.createElement('div');
            card.className = 'title-card';
            card.dataset.title = item.title;
            card.dataset.type = type;
            card.dataset.id = item.imdb_id;
            card.dataset.tmdbId = item.tmdb_id;
            
            const quality = type === 'movie' ? item.quality : 'Series';
            const imageHtml = item.poster_url ? 
                `<img src="${item.poster_url}" alt="${item.title}" loading="lazy">` :
                `<div class="placeholder-image"><span>${item.title.charAt(0)}</span></div>`;
            
            card.innerHTML = `
                <div class="title-card-image">
                    ${imageHtml}
                </div>
                <div class="title-card-metadata">
                    <div class="metadata-top">
                        <div class="title-card-play-button">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8 5v14l11-7z" fill="currentColor"/>
                            </svg>
                        </div>
                        <div class="title-card-add-button">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" fill="currentColor"/>
                            </svg>
                        </div>
                        <div class="title-card-like-button">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z" fill="currentColor"/>
                            </svg>
                        </div>
                        <div class="title-card-expand-button">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z" fill="currentColor"/>
                            </svg>
                        </div>
                    </div>
                    <div class="metadata-bottom">
                        <div class="title-card-title">${item.title}</div>
                        <div class="title-card-genres">
                            <span class="genre-tag">${quality}</span>
                        </div>
                    </div>
                </div>
            `;
            
            // Event listeners are now handled by netflix.js
            return card;
        }

        // Navigation functionality
        function filterByType(type) {
            if (type === 'movie') {
                // Scroll to movies section
                const moviesSection = document.querySelector('#movies-slider').closest('.content-row');
                moviesSection.scrollIntoView({ behavior: 'smooth' });
                
                // Hide TV shows section temporarily
                const tvSection = document.querySelector('#series-slider').closest('.content-row');
                tvSection.style.display = 'none';
                setTimeout(() => {
                    tvSection.style.display = 'block';
                }, 2000);
                
                // Update title
                const movieTitle = moviesSection.querySelector('.row-title');
                movieTitle.textContent = 'Movies';
                
            } else if (type === 'tv') {
                // Scroll to TV shows section
                const tvSection = document.querySelector('#series-slider').closest('.content-row');
                tvSection.scrollIntoView({ behavior: 'smooth' });
                
                // Hide movies section temporarily
                const moviesSection = document.querySelector('#movies-slider').closest('.content-row');
                moviesSection.style.display = 'none';
                setTimeout(() => {
                    moviesSection.style.display = 'block';
                }, 2000);
                
                // Update title
                const tvTitle = tvSection.querySelector('.row-title');
                tvTitle.textContent = 'TV Shows';
            }
        }

        function showNewPopular() {
            // Show all content and highlight as "New & Popular"
            const allSections = document.querySelectorAll('.content-row');
            allSections.forEach(section => {
                section.style.display = 'block';
                const title = section.querySelector('.row-title');
                if (title.textContent.includes('Movies')) {
                    title.textContent = 'New & Popular Movies';
                } else if (title.textContent.includes('TV')) {
                    title.textContent = 'New & Popular TV Shows';
                }
            });
            
            // Scroll to top of content
            document.querySelector('.content-row').scrollIntoView({ behavior: 'smooth' });
        }

        function showMyList() {
            // Check if My List section exists
            const myListSection = document.querySelector('#my-list-slider');
            
            if (myListSection && myListSection.closest('.content-row')) {
                const section = myListSection.closest('.content-row');
                
                // Check if there are items in My List
                const items = myListSection.querySelectorAll('.title-card');
                
                if (items.length > 0) {
                    // Scroll to My List section
                    section.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    
                    // Highlight the section briefly
                    section.style.transition = 'background-color 0.5s ease';
                    section.style.backgroundColor = 'rgba(229, 9, 20, 0.1)';
                    setTimeout(() => {
                        section.style.backgroundColor = 'transparent';
                    }, 1500);
                } else {
                    // No items in My List
                    alert('Your list is empty!\n\nClick the + button on any movie or show to add it to your list.');
                }
            } else {
                // My List section doesn't exist (no items)
                alert('Your list is empty!\n\nClick the + button on any movie or show to add it to your list.');
            }
        }

        // More Info button functionality
        function showMoreInfo() {
            const heroBanner = document.querySelector('.hero-banner');
            const moreInfoBtn = document.getElementById('moreInfoBtn');
            const moreInfoIcon = document.getElementById('moreInfoIcon');
            const moreInfoText = document.getElementById('moreInfoText');
            const isExpanded = heroBanner.classList.contains('expanded');
            
            if (isExpanded) {
                heroBanner.classList.remove('expanded');
                moreInfoText.textContent = 'More Info';
                moreInfoIcon.innerHTML = '<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" fill="currentColor"/>';
            } else {
                heroBanner.classList.add('expanded');
                moreInfoText.textContent = 'Less Info';
                moreInfoIcon.innerHTML = '<path d="M7 14l5-5 5 5z" fill="currentColor"/>';
            }
        }

        // Search on enter key - handled in main DOMContentLoaded above
    </script>
    
    <!-- Enhanced Netflix-like functionality -->
    <script src="/static/js/netflix.js"></script>
</body>
</html>